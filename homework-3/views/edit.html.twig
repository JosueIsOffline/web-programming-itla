{% extends "base.html.twig" %}

{% block content %}
<div class="fade-in">
    <div class="text-center mb-4">
        <h1 class="display-4">âœ¨ Editar a {{personaje.getName()}}âœ¨</h1>

        <p class="lead">Â¡Edita el personaje en el mundo mÃ¡gico de Barbie!</p>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <form id="characterForm" action="/personajes/edit" method="POST">
                <div class="card border-0 shadow-sm mb-4" style="border-radius: 20px; background: linear-gradient(135deg, #FFFFFF 0%, #FCE4EC 100%);">
                    <div class="card-body p-4">
                        <h3 class="card-title text-center mb-4">ğŸ’– InformaciÃ³n Personal</h3>
                        <div class="row"> 
                            <div class="col-md-6 mb-3">
                                <label for="fechaNacimiento" class="form-label">
                                    <i class="fas fa-birthday-cake text-pink me-2"></i>Fecha de Nacimiento *
                                </label>
                                <input type="hidden" id="id" name="id">
                                <input type="date" class="form-control" id="fechaNacimiento" name="fechaNacimiento" >
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="nombre" class="form-label">
                                    <i class="fas fa-user text-pink me-2"></i>Nombre *
                                </label>
                                <input type="text" class="form-control" id="nombre" name="nombre">
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="apellido" class="form-label">
                                    <i class="fas fa-user text-pink me-2"></i>Apellido *
                                </label>
                                <input type="text" class="form-control" id="apellido" name="apellido" >
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="foto" class="form-label">
                                <i class="fas fa-camera text-pink me-2"></i>Foto del Personaje
                            </label>
                            <input type="text" class="form-control" id="foto" name="foto">
                        </div>
                    </div>
                </div>

                <div class="card border-0 shadow-sm mb-4" style="border-radius: 20px; background: linear-gradient(135deg, #FFFFFF 0%, #FCE4EC 100%);">
                    <div class="card-body p-4">
                        <h3 class="card-title text-center mb-4">ğŸ‘‘ InformaciÃ³n Profesional</h3> 
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="profesion" class="form-label">
                                    <i class="fas fa-briefcase text-pink me-2"></i>ProfesiÃ³n o Rol *
                                </label>
                                <select class="form-select" id="profesion" name="profesiones[]" >
                                <option value="">Selecciona una profesiÃ³n...</option>
                                <option value="astronauta">ğŸ‘©â€ğŸš€ Astronauta</option>
                                <option value="doctora">ğŸ‘©â€âš•ï¸ Doctora</option>
                                <option value="veterinaria">ğŸ‘©â€âš•ï¸ Veterinaria</option>
                                <option value="presidenta">ğŸ‘©â€ğŸ’¼ Presidenta</option>
                                <option value="empresaria">ğŸ‘©â€ğŸ’¼ Empresaria</option>
                                <option value="maestra">ğŸ‘©â€ğŸ« Maestra</option>
                                <option value="cientifica">ğŸ‘©â€ğŸ”¬ CientÃ­fica</option>
                                <option value="ingeniera">ğŸ‘©â€ğŸ’» Ingeniera</option>
                                <option value="piloto">ğŸ‘©â€âœˆï¸ Piloto</option>
                                <option value="chef">ğŸ‘©â€ğŸ³ Chef</option>
                                    <option value="artista">ğŸ¨ Artista</option>
                                    <option value="cantante">ğŸ¤ Cantante</option>
                                    <option value="bailarina">ğŸ’ƒ Bailarina</option>
                                    <option value="modelo">ğŸ“¸ Modelo</option>
                                    <option value="deportista">ğŸƒâ€â™€ï¸ Deportista</option>
                                    <option value="exploradora">ğŸ—ºï¸ Exploradora</option>
                                    <option value="princesa">ğŸ‘¸ Princesa</option>
                                    <option value="sirena">ğŸ§œâ€â™€ï¸ Sirena</option>
                                    <option value="hada">ğŸ§šâ€â™€ï¸ Hada</option>
                                    <option value="unicornio">ğŸ¦„ Entrenadora de Unicornios</option>
                                </select>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="nivelExperiencia" class="form-label">
                                    <i class="fas fa-star text-pink me-2"></i>Nivel de Experiencia *
                                </label>
                                <select class="form-select" id="nivelExperiencia" name="nivelExperiencia" >
                                    <option value="">Selecciona el nivel...</option>
                                    <option value="principiante">ğŸŒŸ Principiante</option>
                                    <option value="intermedio">â­â­ Intermedio</option>
                                    <option value="avanzado">â­â­â­ Avanzado</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-barbie btn-lg me-3">
                        <i class="fas fa-plus me-2"></i>Editar Personaje
                    </button>
                    <button type="button" class="btn btn-outline-barbie btn-lg" onclick="limpiarFormulario()">
                        <i class="fas fa-eraser me-2"></i>Limpiar Formulario
                    </button>
                </div>
            </form>
                {% if message is defined and message %}
                  <div id="mensaje-exito" class="alert alert-success text-center mt-4" role="alert">
                      {{ message }}
                  </div>
                  <script>
                    setTimeout(() => {
                      const mensaje = document.getElementById('mensaje-exito');
                      if (mensaje) mensaje.style.display = 'none';
                    }, 4000);
                 </script>
              {% endif %}
        </div>
    </div> 
</div>

<style>
/* Estilos adicionales especÃ­ficos para el formulario */
.text-pink {
    color: var(--barbie-pink) !important;
}

.form-control, .form-select {
    border: 2px solid var(--barbie-light-pink);
    border-radius: 12px;
    padding: 0.75rem 1rem;
    font-weight: 500;
    transition: all 0.3s ease;
}

.form-control:focus, .form-select:focus {
    border-color: var(--barbie-pink);
    box-shadow: 0 0 0 0.2rem rgba(233, 30, 99, 0.25);
}

.form-label {
    color: var(--barbie-dark-pink);
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.card {
    transition: transform 0.3s ease;
}

.card:hover {
    transform: translateY(-5px);
}

.character-card {
    background: linear-gradient(135deg, #FFFFFF 0%, #FCE4EC 100%);
    border: 2px solid var(--barbie-light-pink);
    border-radius: 15px;
    transition: all 0.3s ease;
}

.character-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(233, 30, 99, 0.2);
}

.character-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 12px;
}

.badge-nivel {
    font-size: 0.9rem;
    padding: 0.5rem 1rem;
    border-radius: 20px;
}

.nivel-principiante {
    background: linear-gradient(45deg, #4CAF50, #45a049);
    color: white;
}

.nivel-intermedio {
    background: linear-gradient(45deg, #FF9800, #F57C00);
    color: white;
}

.nivel-avanzado {
    background: linear-gradient(45deg, #9C27B0, #7B1FA2);
    color: white;
}
</style>



<script>
// Array para almacenar los personajes
let personajes = [];
const personaje = {{personaje|json_encode|raw}}
if (personaje){
document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("id").value = personaje.id;
  document.getElementById("nombre").value = personaje.nombre;
  document.getElementById("apellido").value = personaje.apellido;
  document.getElementById("fechaNacimiento").value = personaje.fechaNacimiento;
  document.getElementById("foto").value = personaje.foto;
  personaje.profesiones.map((prof) => {
    document.getElementById("profesion").value = prof.nombre.toLowerCase();
  })
  document.getElementById("nivelExperiencia").value =  personaje.nivelExperiencia;
})
}


// FunciÃ³n para limpiar el formulario
function limpiarFormulario() {
    document.getElementById('characterForm').reset();
}


// FunciÃ³n para mostrar mensajes
function mostrarMensaje(mensaje, tipo) {
    const alertDiv = document.createElement('div');
    alertDiv.className = `alert alert-${tipo} alert-dismissible fade show position-fixed`;
    alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 1050; min-width: 300px;';
    alertDiv.innerHTML = `
        ${mensaje}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    // Remover automÃ¡ticamente despuÃ©s de 3 segundos
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.parentNode.removeChild(alertDiv);
        }
    }, 3000);
}

</script>

<!-- Font Awesome para los iconos -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
{% endblock %}

